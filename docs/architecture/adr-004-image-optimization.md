# ADR-004: 画像最適化戦略

## ステータス

承認済み (2024-03-XX)

## コンテキスト

Webサイトのパフォーマンスと表示速度の向上のため、画像の最適化が必要となりました。特に以下の課題がありました：

- 大きなサイズの画像によるページ読み込み時間の増加
- 異なるデバイスサイズに対する適切な画像サイズの提供
- 画像の遅延読み込みの実装

## 決定事項

1. カスタム`OptimizedImage`コンポーネントの作成
   - Next.jsの`Image`コンポーネントをベースに拡張
   - 自動的な画質最適化
   - レスポンシブサイズの自動計算
   - 遅延読み込みのデフォルト有効化

2. 画像の格納場所
   - 静的画像は`public/images/`ディレクトリに配置
   - カテゴリごとにサブディレクトリを作成（例：`common/`, `business/`など）

3. 画像フォーマット
   - WebPをデフォルトフォーマットとして使用
   - 必要に応じてJPEG/PNGのフォールバックを提供

4. コンポーネントのエクスポート方法
   - `@/components`からの一元的なエクスポート
   - 名前付きエクスポートを使用

## 結果

- ページ読み込み時間の改善
- デバイス別の最適な画像提供
- コードの一貫性と再利用性の向上
- メンテナンス性の向上

## 影響

### 肯定的

- ページパフォーマンスの向上
- 開発者体験の改善
- 一貫した画像最適化の実装

### 否定的

- 追加の設定とメンテナンスが必要
- ビルド時間の若干の増加

## 注意点

- 画像の最適化設定は`next.config.js`で管理
- 新しい画像を追加する際は、適切なディレクトリ構造に従うこと
- コンポーネントの使用方法をドキュメントに記載すること 